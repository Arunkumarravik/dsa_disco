<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Problem Editor</title>
  <link rel="stylesheet" href="dsa_styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/python/python.min.js"></script>
  <script src="dsa_problem_ed_js.js" defer></script>
</head>
<body>
  <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
        </div>
        <nav>
            <ul class="sidebar-menu">
                <li class="menu-item active"><a href="dsa_home.html">Home</a></li>
                <li class="menu-item"><a href="dsa_solve_problem.html">Solve Problem</a></li>
                <li class="menu-item"><a href="solved_problems.html">Solved Problems</a></li>
                <li class="menu-item"><a href="problem_list.html">Problems List</a></li>
            </ul>
        </nav>
    </aside>


  <main class="main-content">
    <h1 id="problem-title"></h1>
    <div id="problem-description" style="border:1px solid #ccc; padding:10px;"></div>

    <div id="code-editor" style="height:400px; border:1px solid #ccc; margin-top:20px;"></div>
    <div class="code-buttons">
      <button id="run-code-btn">Run Code</button>
      <button id="submit-code-btn">Submit Code</button>
    </div>
       <!-- Tabs: Sample Test Case / Test Result -->
       <div class="code-tabs">
        <button class="tab-btn active" data-tab="sample-test">Sample Test Case</button>
        <button class="tab-btn" data-tab="test-result">Test Result</button>
        </div>

        <!-- Tab Panels -->
        <div class="tab-content">
        <div id="sample-test" class="tab-panel active">
            Sample Test Case Output...
        </div>
        <div id="test-result" class="tab-panel">
            Test Result Output...
        </div>
        </div>
  </main>

  <script>
   //Toggling the side bar 
  const sampleBtn = document.querySelector('[data-tab="sample-test"]');
  const resultBtn = document.querySelector('[data-tab="test-result"]');
  const samplePanel = document.getElementById("sample-test");
  const resultPanel = document.getElementById("test-result");

  sampleBtn.addEventListener("click", () => {
    sampleBtn.classList.add("active");
    samplePanel.classList.add("active");

    resultBtn.classList.remove("active");
    resultPanel.classList.remove("active");
  });

  resultBtn.addEventListener("click", () => {
    resultBtn.classList.add("active");
    resultPanel.classList.add("active");

    sampleBtn.classList.remove("active");
    samplePanel.classList.remove("active");
  });
 // Parse URL params
    const params = new URLSearchParams(window.location.search);
    const title = params.get("title");
    const topic = params.get("topic");

    document.getElementById("problem-title").innerText = `${title} (${topic})`;

    // Fetch problem description
    fetch(`/api/get_problem_description?title=${encodeURIComponent(title)}&topic=${encodeURIComponent(topic)}`)
      .then(res => res.json())
      .then(data => {
        document.getElementById("problem-description").innerText = data.description;
      });

    // Setup editor
    window.codeEditor = CodeMirror(document.getElementById("code-editor"), {
      value: "",
      mode: "python",
      lineNumbers: true,
      theme: "eclipse"
    });
  </script>
</body>
</html>
